---
layout: default
---
<div class="page">

{% assign with_media = false %}
{% if page.video_embed or page.images[0].image_path %}
  {% assign with_media = true %}
{% endif %}

  <header class="page--header">
    <h1 class="page--title">{{ page.title }}</h1>
  </header>

  <article class="post">
    {% if page.main_image_path and page.display_image %}
      <figure class="post--image">
      {% assign alt_text = page.title %}
      {% if page.main_image_caption %} {% assign alt_text = page.main_image_caption %} {% endif %}
      {% include img.html src=page.main_image_path alt=alt_text %}
      <figcaption>{{ alt_text }}</figcaption>
      </figure>
    {% endif %}


    <section class="post--content">
      {% if page.description_markdown %}
         {{ page.description_markdown | markdownify }}
      {% endif %}
      {% if page.book_date %}
        <p class="post--date">{{ page.book_date  | date: "%Y" }}</p>
      {% endif %}
      {% if page.purchase_link %}
         <a href="{{ page.purchase_link }}" class="button">Buy book</a>
      {% endif %}
    </section>
  </article>


{% if with_media %}
  <aside class="media">

    {% if page.images[0].image_path %}

    <section class="gallery--list">

      {% for thisimage in page.images %}

        {% assign image = site.default_gallery_image %}
        {% if thisimage.image_path %}
          {% assign image = thisimage.image_path %}
        {% endif %}

          <div class="gallery--box">

            <a href="{% include imgpath.html src=image %}" class="gallery--link" data-lightbox="gallery" data-title="{{ thisimage.description }}">

              {% if page.thumb_crop %}

                <!-- cropped square images -->
                {% include img.html src=image width=200 height=200 fit=crop alt=thisimage.description %}
                <!-- end cropped square -->

              {% else %}

                <!-- full format images -->
                {% include img.html src=image alt=thisimage.description %}
                 <!-- end format images -->
               {% endif %}

               {% if page.display_title %}
                  <figcaption class="gallery--caption">{{ thisimage.description }}</figcaption>
              {% endif %}

            </a>



          </div>


      {% endfor %}

    </section>

    {% endif %}

  </aside>
{% endif %}

{% assign books = site.books | sort: "book_date" | reverse %}

{% if books %}

<hr>

  <h2>View more books</h2>


    <section class="books gallery--list">

    {% for book in books %}

      {% if book.url != page.url %}

      <div class="gallery--box">

        <a href="{{ book.url }}" class="gallery--link">

            <!-- cropped square images -->
            {% include img.html src=book.main_image_path width=200 height=200 fit=crop alt=book.title %}
            <!-- end cropped square -->

            <figcaption class="gallery--caption">{{ book.title }}</figcaption>

        </a>

      </div>
    {% endif %}
    {% endfor %}

   </section>


{% endif %}

</div>
